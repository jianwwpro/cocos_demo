{"version":3,"sources":["assets/script/Game.js"],"names":["cc","Class","Component","properties","starPrefab","type","Prefab","maxStarDuration","minStarDuration","ground","Node","player","scoreDisplay","Label","spawnNewStar","newStar","instantiate","node","addChild","setPosition","getNewStarPosition","getComponent","game","starDuration","Math","random","timer","randX","randY","groundY","jumpHeight","maxX","width","v2","onLoad","y","height","score","start","update","dt","gameOver","gainScore","string","stopAllActions","director","loadScene"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACTC,IAAAA,UAAU,EAAE;AACR,iBAAS,IADD;AAERC,MAAAA,IAAI,EAAEL,EAAE,CAACM;AAFD,KADH;AAKTC,IAAAA,eAAe,EAAE,CALR;AAMTC,IAAAA,eAAe,EAAE,CANR;AAOTC,IAAAA,MAAM,EAAE;AACJ,iBAAS,IADL;AAEJJ,MAAAA,IAAI,EAAEL,EAAE,CAACU;AAFL,KAPC;AAWTC,IAAAA,MAAM,EAAE;AACJ,iBAAS,IADL;AAEJN,MAAAA,IAAI,EAAEL,EAAE,CAACU;AAFL,KAXC;AAeTE,IAAAA,YAAY,EAAE;AACV,iBAAS,IADC;AAEVP,MAAAA,IAAI,EAAEL,EAAE,CAACa;AAFC;AAfL,GAHP;AAwBL;AACAC,EAAAA,YAAY,EAAE,wBAAU;AACpB,QAAIC,OAAO,GAAGf,EAAE,CAACgB,WAAH,CAAe,KAAKZ,UAApB,CAAd;AACA,SAAKa,IAAL,CAAUC,QAAV,CAAmBH,OAAnB;AACAA,IAAAA,OAAO,CAACI,WAAR,CAAoB,KAAKC,kBAAL,EAApB;AACAL,IAAAA,OAAO,CAACM,YAAR,CAAqB,MAArB,EAA6BC,IAA7B,GAAoC,IAApC;AAEA,SAAKC,YAAL,GAAoB,KAAKf,eAAL,GAAuBgB,IAAI,CAACC,MAAL,MAAiB,KAAKlB,eAAL,GAAuB,KAAKC,eAA7C,CAA3C;AACA,SAAKkB,KAAL,GAAa,CAAb;AACH,GAjCI;AAkCLN,EAAAA,kBAAkB,EAAE,8BAAU;AAC1B,QAAIO,KAAK,GAAG,CAAZ;AACA,QAAIC,KAAK,GAAG,KAAKC,OAAL,GAAeL,IAAI,CAACC,MAAL,KAAgB,KAAKd,MAAL,CAAYU,YAAZ,CAAyB,QAAzB,EAAmCS,UAAlE,GAA+E,EAA3F;AACA,QAAIC,IAAI,GAAG,KAAKd,IAAL,CAAUe,KAAV,GAAgB,CAA3B;AACAL,IAAAA,KAAK,GAAG,CAACH,IAAI,CAACC,MAAL,KAAgB,GAAjB,IAAwB,CAAxB,GAA4BM,IAApC;AACA,WAAO/B,EAAE,CAACiC,EAAH,CAAMN,KAAN,EAAYC,KAAZ,CAAP;AACH,GAxCI;AAyCJM,EAAAA,MAzCI,oBAyCM;AACN,SAAKL,OAAL,GAAe,KAAKpB,MAAL,CAAY0B,CAAZ,GAAgB,KAAK1B,MAAL,CAAY2B,MAAZ,GAAmB,CAAlD;AAED,SAAKV,KAAL,GAAa,CAAb;AACA,SAAKH,YAAL,GAAoB,CAApB;AAGC,SAAKT,YAAL;AACA,SAAKuB,KAAL,GAAW,CAAX;AAEH,GAnDG;AAqDLC,EAAAA,KArDK,mBAqDI,CAER,CAvDI;AAyDLC,EAAAA,MAzDK,kBAyDGC,EAzDH,EAyDO;AACR,QAAG,KAAKd,KAAL,GAAa,KAAKH,YAArB,EAAmC;AAC/B,WAAKkB,QAAL;AACA;AACH;;AACD,SAAKf,KAAL,IAAcc,EAAd;AACH,GA/DI;AAgELE,EAAAA,SAAS,EAAE,qBAAU;AACjB,SAAKL,KAAL,IAAc,CAAd;AACA,SAAKzB,YAAL,CAAkB+B,MAAlB,GAA2B,aAAa,KAAKN,KAA7C;AACH,GAnEI;AAoELI,EAAAA,QAAQ,EAAE,oBAAU;AAChB,SAAK9B,MAAL,CAAYiC,cAAZ;AACA5C,IAAAA,EAAE,CAAC6C,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH;AAvEI,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n       starPrefab: {\n           default: null,\n           type: cc.Prefab\n       },\n       maxStarDuration: 0,\n       minStarDuration: 0,\n       ground: {\n           default: null,\n           type: cc.Node\n       },\n       player: {\n           default: null,\n           type: cc.Node\n       },\n       scoreDisplay: {\n           default: null,\n           type: cc.Label\n       }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n    spawnNewStar: function(){\n        var newStar = cc.instantiate(this.starPrefab);\n        this.node.addChild(newStar);\n        newStar.setPosition(this.getNewStarPosition());\n        newStar.getComponent('Star').game = this;\n        \n        this.starDuration = this.minStarDuration + Math.random() * (this.maxStarDuration - this.minStarDuration);\n        this.timer = 0;\n    },\n    getNewStarPosition: function(){\n        var randX = 0;\n        var randY = this.groundY + Math.random() * this.player.getComponent('Player').jumpHeight + 50;\n        var maxX = this.node.width/2;\n        randX = (Math.random() - 0.5) * 2 * maxX;\n        return cc.v2(randX,randY);\n    },\n     onLoad () {\n         this.groundY = this.ground.y + this.ground.height/2;\n         \n        this.timer = 0;\n        this.starDuration = 0;\n        \n\n         this.spawnNewStar();\n         this.score=0;\n\n     },\n\n    start () {\n\n    },\n\n    update (dt) {\n        if(this.timer > this.starDuration) {\n            this.gameOver();\n            return;\n        }\n        this.timer += dt;\n    },\n    gainScore: function(){\n        this.score += 1;\n        this.scoreDisplay.string = 'Score : ' + this.score;\n    },\n    gameOver: function(){\n        this.player.stopAllActions();\n        cc.director.loadScene('game')\n    }\n});\n"]}