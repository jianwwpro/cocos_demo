{"version":3,"sources":["assets/script/Player.js"],"names":["cc","Class","Component","properties","jumpHeight","jumpDuration","maxMoveSpeed","accel","runJumpAction","jumpUp","tween","by","y","sasing","jumpDown","sequence","accLeft","accRight","xSpeed","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","repeatForever","onDestroy","off","update","dt","Math","abs","node","x","onLoad","jumpAction","then","start","event","keyCode","macro","KEY","a","d"],"mappings":"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","sourceRoot":"/","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n       jumpHeight: 0,\n       jumpDuration: 0,\n       maxMoveSpeed: 0,\n       accel: 0,\n    },\n    runJumpAction () {\n        var jumpUp = cc.tween().by(this.jumpDuration, {y: this.jumpHeight}, {sasing: 'sineOut'});\n        var jumpDown = cc.tween().by(this.jumpDuration, {y: -this.jumpHeight}, {sasing: 'sineOut'});\n        var tween = cc.tween().sequence(jumpUp,jumpDown);\n        this.accLeft = false;\n        this.accRight = false;\n        this.xSpeed = 0;\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n\n        return cc.tween().repeatForever(tween);\n    },\n    onDestroy () {\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown, this);\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp, this);\n    },\n    update: function(dt){\n        if(this.accLeft) {\n            this.xSpeed -= this.accel * dt;\n        }else if(this.accRight) {\n            this.xSpeed += this.accel * dt;\n        }\n\n        if(Math.abs(this.xSpeed) > this.maxMoveSpeed ){\n            this.xSpeed = this.maxMoveSpeed * this.xSpeed / Math.abs(this.xSpeed);\n            \n        }\n        this.node.x += this.xSpeed * dt;\n        \n    },\n    // LIFE-CYCLE CALLBACKS:\n\n     onLoad () {\n         var jumpAction = this.runJumpAction();\n         cc.tween(this.node).then(jumpAction).start();\n     },\n     onKeyDown(event) {\n        switch(event.keyCode) {\n            case cc.macro.KEY.a: \n                this.accLeft = true;\n                break;\n            case cc.macro.KEY.d: \n                this.accRight = true;\n                break;\n\n        }\n     },\n     onKeyUp( event ){\n        switch(event.keyCode) {\n            case cc.macro.KEY.a: \n                this.accLeft = false;\n                break;\n            case cc.macro.KEY.d: \n                this.accRight = false;\n                break;\n\n        }\n     },\n    start () {\n\n    },\n\n    // update (dt) {},\n});\n"]}